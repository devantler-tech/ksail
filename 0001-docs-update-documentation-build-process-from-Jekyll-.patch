From 9eddc51f78bef37051b34ca6f1ffa2ee47aa7a05 Mon Sep 17 00:00:00 2001
From: Update Docs <update-docs@devantler-tech.github.io>
Date: Sun, 18 Jan 2026 22:24:18 +0000
Subject: [PATCH] docs: update documentation build process from Jekyll to Astro

- Update CONTRIBUTING.md to reflect Astro/Starlight instead of Jekyll/Just the Docs
- Update .github/copilot-instructions.md with correct documentation build commands
- Fix CLI flags documentation path: docs/src/content/docs/cli-flags/ (not docs/configuration/cli-flags/)
- Replace Ruby/Bundler/Jekyll commands with Node.js/npm/Astro commands
- Update output directory references from _site/ to dist/
- Update local dev server port from 4000 to 4321
- Remove outdated Jekyll troubleshooting section

These changes align the documentation with the actual build system used in
.github/workflows/publish-pages.yaml and .github/workflows/test-pages.yaml
---
 .github/copilot-instructions.md | 44 ++++++++++++---------------------
 CONTRIBUTING.md                 | 23 +++++++----------
 2 files changed, 25 insertions(+), 42 deletions(-)

diff --git a/.github/copilot-instructions.md b/.github/copilot-instructions.md
index 3bec2bc..0208d46 100644
--- a/.github/copilot-instructions.md
+++ b/.github/copilot-instructions.md
@@ -18,13 +18,10 @@ KSail is a Go-based CLI application that provides a unified SDK for spinning up
 **Required for Documentation**:
 
 ```bash
-# Ruby and Jekyll for documentation builds
-# CI uses Ruby 3.3 (see .github/workflows/test-pages.yaml)
-gem install --user-install bundler
-export PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"
+# Node.js for documentation builds
+# CI uses Node.js 22 (see .github/workflows/test-pages.yaml)
 cd /path/to/repo/docs
-bundle config set --local path 'vendor/bundle'
-bundle install
+npm ci
 ```
 
 ### Build Commands
@@ -49,9 +46,8 @@ go test ./...
 
 ```bash
 cd /path/to/repo/docs
-export PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"
-bundle exec jekyll build
-# Takes ~2 seconds. Documentation builds to _site/ directory
+npm run build
+# Takes ~2-3 seconds. Documentation builds to dist/ directory
 ```
 
 ### Running the Application
@@ -104,9 +100,9 @@ go run main.go --help
 
    ```bash
    cd /path/to/repo/docs
-   export PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"
-   bundle exec jekyll build  # Must succeed
-   ls _site/  # Should contain generated HTML files
+   npm ci
+   npm run build  # Must succeed
+   ls dist/  # Should contain generated HTML files
    ```
 
 ## Common Tasks
@@ -125,9 +121,9 @@ go run main.go --help
 │   ├── io/                 # I/O utilities
 │   ├── k8s/                # Kubernetes helpers/templates
 │   └── svc/                # Services (installers, managers, etc.)
-├── docs/                   # Jekyll documentation source
-│   ├── _site/              # Generated site (after jekyll build)
-│   └── Gemfile             # Ruby dependencies for documentation
+├── docs/                   # Astro documentation source
+│   ├── dist/               # Generated site (after npm run build)
+│   └── package.json        # Node.js dependencies for documentation
 ├── go.mod                  # Go module file
 └── README.md               # Main repository documentation
 ```
@@ -135,8 +131,7 @@ go run main.go --help
 ### Key Configuration Files
 
 - **go.mod**: Go module dependencies (includes embedded kubectl, helm, kind, k3d, flux, argocd)
-- **Gemfile**: Jekyll documentation dependencies
-- **\_config.yml**: Jekyll site configuration in docs/
+- **package.json**: Node.js dependencies for Astro documentation
 - **.github/workflows/\*.yaml**: CI/CD pipelines
 
 ### CLI Commands Reference
@@ -175,13 +170,6 @@ go version  # Should match the version in go.mod (go 1.25.4)
 # If not, install/update Go from https://go.dev/dl/
 ```
 
-**Jekyll Permission Errors**:
-
-```bash
-bundle config set --local path 'vendor/bundle'
-bundle install
-```
-
 **Docker Connection Issues**:
 
 ```bash
@@ -204,9 +192,9 @@ go test ./...                          # Run unit tests
 
 ```bash
 cd /path/to/repo/docs
-export PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"
-bundle exec jekyll build               # Verify docs build
-bundle exec jekyll serve --host 0.0.0.0  # Test locally (if needed)
+npm ci                                 # Install dependencies
+npm run build                          # Verify docs build
+npm run dev                            # Test locally (if needed)
 ```
 
 ### Important Notes
@@ -251,7 +239,7 @@ bundle exec jekyll serve --host 0.0.0.0  # Test locally (if needed)
 - Go 1.25.4+ (see `go.mod`)
 - Embedded Kubernetes tools (kubectl, helm, kind, k3d, flux, argocd) as Go libraries
 - Docker as the only external dependency
-- Jekyll for documentation (Ruby-based)
+- Astro with Starlight for documentation (Node.js-based)
 
 ## Recent Changes
 
diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
index 860bff8..98a9b5b 100644
--- a/CONTRIBUTING.md
+++ b/CONTRIBUTING.md
@@ -38,7 +38,7 @@ mega-linter-runner -f go
 
 The same configuration is used in CI, so you can expect the same linting behavior in your local environment as in the CI pipeline.
 
-MegaLinter also checks Markdown files. Markdown lint rules are configured in `.markdownlint.json` (some rules are relaxed to accommodate Jekyll/Just the Docs front matter and documentation formatting).
+MegaLinter also checks Markdown files. Markdown lint rules are configured in `.markdownlint.json` (some rules are relaxed to accommodate Astro/Starlight front matter and documentation formatting).
 
 ### Build
 
@@ -69,13 +69,13 @@ go test ./...
 
 ### Documentation
 
-The project documentation is built using [Jekyll](https://jekyllrb.com/) with the [Just the Docs](https://just-the-docs.com/) theme and is located in the `docs/` directory.
+The project documentation is built using [Astro](https://astro.build/) with the [Starlight](https://starlight.astro.build/) theme and is located in the `docs/` directory.
 
 #### Auto-generated reference docs
 
 Some documentation is generated from source and should **not** be edited manually:
 
-- **CLI flags reference:** `docs/configuration/cli-flags/` (generated by `.github/scripts/generate-cli-flags-docs.sh` from `ksail --help` output)
+- **CLI flags reference:** `docs/src/content/docs/cli-flags/` (generated by `.github/scripts/generate-cli-flags-docs.sh` from `ksail --help` output)
 - **Configuration schema:** `schemas/ksail-config.schema.json` (generated by `.github/scripts/generate-schema.sh`)
 
 To regenerate locally:
@@ -94,23 +94,18 @@ go build -o ksail
 ```sh
 # working-directory: ./docs
 
-# Install bundler (first time only)
-gem install --user-install bundler
-export PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH"
-
-# Install dependencies (first time only or when Gemfile changes)
-bundle config set --local path 'vendor/bundle'
-bundle install
+# Install dependencies (first time only or when package-lock.json changes)
+npm ci
 
 # Build the site
-bundle exec jekyll build
+npm run build
 
 # Serve the site locally with live reload (optional)
-bundle exec jekyll serve
-# Visit http://localhost:4000 to view the site
+npm run dev
+# Visit http://localhost:4321 to view the site
 ```
 
-The built site will be available in `docs/_site/`. Note that `docs/_site/`, `docs/vendor/`, and `docs/.bundle/` are excluded from git via `.gitignore`.
+The built site will be available in `docs/dist/`. Note that `docs/dist/` and `docs/node_modules/` are excluded from git via `.gitignore`.
 
 ## Project Structure
 
-- 
2.34.1

