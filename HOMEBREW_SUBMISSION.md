# Homebrew Core Submission Guide

This guide outlines the process for submitting KSail to the official Homebrew tap (`homebrew/core`).

## Prerequisites Status

Before submitting to Homebrew core, ensure all prerequisites are met:

- [x] **Maintained**: KSail has regular releases and no outstanding security vulnerabilities
- [x] **Stable**: All releases are stable (not beta/unstable)
- [x] **Known**: Repository has â‰¥75 stars on GitHub
- [ ] **Used**: Need to demonstrate significant community adoption
- [x] **Homepage**: <https://ksail.devantler.tech>

## Current Status

KSail is currently distributed via a custom tap:

```bash
brew install devantler-tech/formulas/ksail
```

The formula is automatically generated and published by GoReleaser on each release.

## Why Not in Homebrew Core Yet?

While KSail meets most technical requirements, Homebrew core requires demonstrated **community usage**. This means:

- Significant download/installation numbers
- Active community of users
- Production usage examples
- Community contributions and engagement

## When to Submit

Submit to Homebrew core when:

1. **Usage Metrics**: The custom tap formula has substantial installations
2. **Community Size**: Growing community of active users
3. **Stability**: Multiple stable releases with good user feedback
4. **Maintenance**: Proven track record of maintenance and support

## Submission Process

### 1. Verify Formula Quality

The formula is auto-generated in `.goreleaser.yaml`. Before submission, verify:

```bash
# Test the formula locally
brew install devantler-tech/formulas/ksail
brew test devantler-tech/formulas/ksail
brew audit --strict devantler-tech/formulas/ksail
```

### 2. Prepare Formula for Submission

1. Get the latest formula from the custom tap:
   ```bash
   curl -o ksail.rb https://raw.githubusercontent.com/devantler-tech/homebrew-formulas/main/Formula/ksail.rb
   ```

2. Review the formula for Homebrew core compliance:
   - Remove any custom tap specific configurations
   - Ensure it follows Homebrew style guide
   - Verify all tests pass

### 3. Open Pull Request to Homebrew Core

1. Fork [Homebrew/homebrew-core](https://github.com/Homebrew/homebrew-core)

2. Create a new branch:
   ```bash
   git checkout -b ksail
   ```

3. Add the formula:
   ```bash
   cp ksail.rb Formula/ksail.rb
   ```

4. Test the formula:
   ```bash
   brew install --build-from-source Formula/ksail.rb
   brew test Formula/ksail.rb
   brew audit --strict Formula/ksail.rb
   ```

5. Commit and push:
   ```bash
   git add Formula/ksail.rb
   git commit -m "ksail: new formula"
   git push origin ksail
   ```

6. Open a PR with:
   - Title: `ksail <version>` (for new formula) or `ksail: new formula`
   - Description including:
     - What KSail does
     - Why it should be in Homebrew core
     - Evidence of usage and community adoption
     - Link to homepage and documentation

### 4. Respond to Maintainer Feedback

Homebrew maintainers will review the submission and may request:

- Changes to formula style or structure
- Additional evidence of usage
- Updates to tests or dependencies
- Documentation improvements

Be responsive and make requested changes promptly.

### 5. Maintain the Formula

Once accepted:

- Formula will be in `homebrew/core`
- Future updates can be submitted via `brew bump-formula-pr`
- Respond to issues and keep formula updated

## Helpful Commands

```bash
# Test formula locally
brew install --build-from-source devantler-tech/formulas/ksail
brew test devantler-tech/formulas/ksail
brew audit --strict devantler-tech/formulas/ksail

# Check formula style
brew style devantler-tech/formulas/ksail

# Update formula version (for future updates)
brew bump-formula-pr --url=<new_release_tarball_url> ksail
```

## References

- [Homebrew Formula Cookbook](https://docs.brew.sh/Formula-Cookbook)
- [Adding Software to Homebrew](https://docs.brew.sh/Adding-Software-to-Homebrew)
- [How to Open a Homebrew Pull Request](https://docs.brew.sh/How-To-Open-a-Homebrew-Pull-Request)
- [Acceptable Formulae](https://docs.brew.sh/Acceptable-Formulae)
- [Homebrew Style Guide](https://docs.brew.sh/Formula-Cookbook#homebrew-terminology)

## Notes

- **Formula vs Cask**: KSail is a CLI tool, so it uses a **formula**, not a cask. Casks are for GUI applications.
- **Auto-generation**: The formula is auto-generated by GoReleaser, making maintenance easier.
- **Custom Tap**: Continue using the custom tap (`devantler-tech/formulas`) until accepted into core.
